webpackJsonp([58],{KPnR:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("OPv7"),i=e("uB82"),o={data:function(){return{dataForm:{agentAccount:"",agentEntName:"",currYearSignStatus:"",currProfitStatus:""},apmVisible:!1,agentAccount:"",apmDataList:[],apmDataListLoading:!1,apmDataProfitMonthList:[],apmDataProfitMonthListLoading:!1,chgProfitStatusVisible:!1,rdVisible:!1,pageIndex:1,pageSize:10,totalPage:0}},components:{ApmStatusChg:n.default,Rd:i.default},methods:{init:function(t){this.apmVisible=!0,this.agentAccount=t,this.getApmDataList(),this.getApmDataProfitMonthList()},getApmDataList:function(){var t=this;this.apmDataListLoading=!0,this.$http({url:this.$http.adornUrl("/profit/agent/list"),method:"post",data:this.$http.adornParams({agentAccount:this.agentAccount})}).then(function(a){var e=a.data;e&&200===e.code&&e.data?t.apmDataList=e.data.list:t.apmDataList=[],t.apmDataListLoading=!1})},getApmDataProfitMonthList:function(){var t=this;this.apmDataProfitMonthListLoading=!0,this.$http({url:this.$http.adornUrl("/profit/agent/detail/month"),method:"post",data:this.$http.adornParams({agentAccount:this.agentAccount})}).then(function(a){var e=a.data;e&&200===e.code&&e.data?(t.apmDataProfitMonthList=e.data.list,t.totalPage=e.data.totalCount):(t.apmDataProfitMonthList=[],t.totalPage=0),t.apmDataProfitMonthListLoading=!1})},typeIndex:function(t){return t+(this.pageIndex-1)*this.pageSize+1},sizeChangeHandle:function(t){this.pageSize=t,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(t){this.pageIndex=t,this.getDataList()},profitStatusUpdateHandle:function(t,a,e){var n=this;this.chgProfitStatusVisible=!0,this.$nextTick(function(){n.$refs.apmStatusChg.init(t,a,e)})},recommendDetailHandle:function(t,a){var e=this;this.rdVisible=!0,this.$nextTick(function(){e.$refs.rd.init(t,a)})}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mod-apm"},[e("el-dialog",{attrs:{title:"伙伴信息","close-on-click-modal":!1,visible:t.apmVisible},on:{"update:visible":function(a){t.apmVisible=a}}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.apmDataListLoading,expression:"apmDataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.apmDataList,border:""}},[e("el-table-column",{attrs:{prop:"agentInfo.agentAccount","header-align":"center",align:"center",label:"代理商账号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"agentInfo.agentEntName","header-align":"center",align:"center",label:"代理商名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"profitInfo.grantAmt","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"发放金额（万元）"}}),t._v(" "),e("el-table-column",{attrs:{prop:"profitInfo.profitSumAmt","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"分润总额（元）"}}),t._v(" "),e("el-table-column",{attrs:{prop:"agentInfo.signYears","header-align":"center",align:"center",label:"签约时间"},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(a.row.agentInfo.signYears,function(a){return e("el-tag",{key:a,attrs:{size:"small",type:"danger"}},[t._v(t._s(a))])})}}])})],1),t._v(" "),e("el-form",{attrs:{inline:!0}},[e("el-form-item",[e("div",[t._v("  ")])])],1),t._v(" "),e("el-form",{attrs:{inline:!0}},[e("el-form-item",[e("h5",[t._v("每月分润详情")])])],1),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.apmDataProfitMonthListLoading,expression:"apmDataProfitMonthListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.apmDataProfitMonthList,border:""}},[e("el-table-column",{attrs:{prop:"profitInfo.date","header-align":"center",align:"center",label:"时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"profitInfo.grantAmt","header-align":"center",align:"center",width:"200","show-overflow-tooltip":!0,label:"贷款发放金额（万元）"}}),t._v(" "),e("el-table-column",{attrs:{prop:"profitInfo.profitSumAmt","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"分润金额（元）"}}),t._v(" "),e("el-table-column",{attrs:{prop:"profitInfo.currProfitStatus","header-align":"center",align:"center",label:"结算状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[0===a.row.profitInfo.currProfitStatus?e("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("未结算")]):e("el-tag",{attrs:{size:"small"}},[t._v("已结算")])]}}])}),t._v(" "),e("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.profitStatusUpdateHandle(t.agentAccount,a.row.profitInfo.date,a.row.profitInfo.currProfitStatus)}}},[t._v("修改结算状态")]),t._v(" "),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.recommendDetailHandle(t.agentAccount,a.row.profitInfo.date)}}},[t._v("推荐信息")])]}}])})],1),t._v(" "),e("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1),t._v(" "),t.chgProfitStatusVisible?e("apmStatusChg",{ref:"apmStatusChg",on:{refreshDataList:t.getApmDataProfitMonthList}}):t._e(),t._v(" "),t.rdVisible?e("rd",{ref:"rd"}):t._e()],1)},staticRenderFns:[]},l=e("vSla")(o,r,!1,null,null,null);a.default=l.exports}});