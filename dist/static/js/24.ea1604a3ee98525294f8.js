webpackJsonp([24,46,58],{"3kzK":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("JKxE"),r=a("KPnR"),i={data:function(){return{dataForm:{agentAccount:"",agentEntName:"",currYearSignStatus:"",currProfitStatus:""},dataList:[],pageIndex:1,pageSize:10,totalPage:0,dataListLoading:!1,addOrUpdateVisible:!1,profitVisible:!1}},components:{AddOrUpdate:n.default,ProfitMonth:r.default},created:function(){this.getDataList()},activated:function(){this.getDataList()},methods:{valueMoneyFormat:function(t,e){return(t.wantLoanAmt||0)/1e6},getDataList:function(){var t=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/profit/agent/list"),method:"post",data:this.$http.adornParams({page:this.pageIndex,limit:this.pageSize,agentAccount:this.dataForm.agentAccount,agentEntName:this.dataForm.agentEntName,currYearSignStatus:this.dataForm.currYearSignStatus,currProfitStatus:this.dataForm.currProfitStatus})}).then(function(e){var a=e.data;a&&200===a.code&&a.data?(t.dataList=a.data.list,t.totalPage=a.data.totalCount):(t.dataList=[],t.totalPage=0),t.dataListLoading=!1})},typeIndex:function(t){return t+(this.pageIndex-1)*this.pageSize+1},sizeChangeHandle:function(t){this.pageSize=t,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(t){this.pageIndex=t,this.getDataList()},addOrUpdateHandle:function(t){var e=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){e.$refs.addOrUpdate.init(t)})},profitMonthHandle:function(t){var e=this;this.profitVisible=!0,this.$nextTick(function(){e.$refs.profitMonth.init(t)})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mod-ap"},[a("el-form",{attrs:{inline:!0,model:t.dataForm},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.getDataList()}}},[a("el-form-item",{attrs:{label:"代理商账号:"}},[a("el-input",{attrs:{placeholder:"代理商账号",clearable:""},model:{value:t.dataForm.agentAccount,callback:function(e){t.$set(t.dataForm,"agentAccount",e)},expression:"dataForm.agentAccount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"代理商名称:"}},[a("el-input",{attrs:{placeholder:"代理商名称",clearable:""},model:{value:t.dataForm.agentEntName,callback:function(e){t.$set(t.dataForm,"agentEntName",e)},expression:"dataForm.agentEntName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"签约状态:"}},[a("el-select",{attrs:{placeholder:"请选择签约状态"},model:{value:t.dataForm.currYearSignStatus,callback:function(e){t.$set(t.dataForm,"currYearSignStatus",e)},expression:"dataForm.currYearSignStatus"}},[a("el-option",{key:"",attrs:{value:"",label:"全部"}}),t._v(" "),a("el-option",{key:"0",attrs:{value:"0",label:"未签约"}}),t._v(" "),a("el-option",{key:"1",attrs:{value:"1",label:"已签约"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"结算状态:"}},[a("el-select",{attrs:{placeholder:"请选择结算状态"},model:{value:t.dataForm.currProfitStatus,callback:function(e){t.$set(t.dataForm,"currProfitStatus",e)},expression:"dataForm.currProfitStatus"}},[a("el-option",{key:"",attrs:{value:"",label:"全部"}}),t._v(" "),a("el-option",{key:"0",attrs:{value:"0",label:"当期未结算"}}),t._v(" "),a("el-option",{key:"1",attrs:{value:"1",label:"当期已结算"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{on:{click:function(e){t.getDataList()}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addOrUpdateHandle()}}},[t._v("新增代理商")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,border:""}},[a("el-table-column",{attrs:{type:"index",index:t.typeIndex,label:"序号",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"agentInfo.agentAccount","header-align":"center",align:"center",label:"代理商账号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"agentInfo.agentEntName","header-align":"center",align:"center",label:"代理商名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"agentInfo.currYearSignStatus","header-align":"center",align:"center",label:"签约状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.agentInfo.currYearSignStatus?a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("未签约")]):a("el-tag",{attrs:{size:"small"}},[t._v("已签约")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"profitInfo.grantSum","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"贷款发放笔数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"profitInfo.grantAmt","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"发放金额（万元）"}}),t._v(" "),a("el-table-column",{attrs:{prop:"profitInfo.profitSumAmt","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"分润总额（元）"}}),t._v(" "),a("el-table-column",{attrs:{prop:"profitInfo.currProfitAmt","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"当期分润（元）",formatter:t.valueMoneyFormat}}),t._v(" "),a("el-table-column",{attrs:{prop:"profitInfo.currProfitStatus","header-align":"center",align:"center",label:"结算状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.profitInfo.currProfitStatus?a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("未结算")]):a("el-tag",{attrs:{size:"small"}},[t._v("已结算")])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.addOrUpdateHandle(e.row.agentInfo.agentAccount)}}},[t._v("修改代理商")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.profitMonthHandle(e.row.agentInfo.agentAccount)}}},[t._v("分润信息")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}}),t._v(" "),t.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:t.getDataList}}):t._e(),t._v(" "),t.profitVisible?a("profit-month",{ref:"profitMonth",on:{refreshDataList:t.getDataList}}):t._e()],1)},staticRenderFns:[]},l=a("vSla")(i,o,!1,null,null,null);e.default=l.exports},AfCo:function(t,e){t.exports=[{FCODE:11e4,FNAME:"北京市"},{FCODE:12e4,FNAME:"天津市"},{FCODE:13e4,FNAME:"河北省"},{FCODE:14e4,FNAME:"山西省"},{FCODE:15e4,FNAME:"内蒙古自治区"},{FCODE:21e4,FNAME:"辽宁省"},{FCODE:22e4,FNAME:"吉林省"},{FCODE:23e4,FNAME:"黑龙江省"},{FCODE:31e4,FNAME:"上海市"},{FCODE:32e4,FNAME:"江苏省"},{FCODE:33e4,FNAME:"浙江省"},{FCODE:34e4,FNAME:"安徽省"},{FCODE:35e4,FNAME:"福建省"},{FCODE:36e4,FNAME:"江西省"},{FCODE:37e4,FNAME:"山东省"},{FCODE:41e4,FNAME:"河南省"},{FCODE:42e4,FNAME:"湖北省"},{FCODE:43e4,FNAME:"湖南省"},{FCODE:44e4,FNAME:"广东省"},{FCODE:45e4,FNAME:"广西壮族自治区"},{FCODE:46e4,FNAME:"海南省"},{FCODE:5e5,FNAME:"重庆市"},{FCODE:51e4,FNAME:"四川省"},{FCODE:52e4,FNAME:"贵州省"},{FCODE:53e4,FNAME:"云南省"},{FCODE:54e4,FNAME:"西藏自治区"},{FCODE:61e4,FNAME:"陕西省"},{FCODE:62e4,FNAME:"甘肃省"},{FCODE:63e4,FNAME:"青海省"},{FCODE:64e4,FNAME:"宁夏回族自治区"},{FCODE:65e4,FNAME:"新疆维吾尔自治区"},{FCODE:71e4,FNAME:"台湾省"},{FCODE:81e4,FNAME:"香港特别行政区"},{FCODE:82e4,FNAME:"澳门特别行政区"}]},JKxE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("HzJ8"),r=a.n(n),i=a("E4LH"),o=a("AfCo"),l={data:function(){var t=this;return{visible:!1,signYearList:[],dataForm:{id:0,agentEntName:"",agentAccount:"",name:"",mobile:"",currYear:(new Date).getFullYear(),nextYear:(new Date).getFullYear()+1,signYears:[],province:""},dataRule:{agentEntName:[{required:!0,message:"代理商名称不能为空",trigger:"blur"}],agentAccount:[{required:!0,message:"代理商账号不能为空",trigger:"blur"},{validator:function(e,a,n){t.dataForm.id&&n(),t.$http({url:t.$http.adornUrl("/profit/agent/exist/"+a),method:"get",params:t.$http.adornParams()}).then(function(t){var e=t.data;e&&200===e.code&&e.data?n(new Error("代理商已经存在")):n()})},trigger:"blur"}],name:[{required:!0,message:"联系人姓名不能为空",trigger:"blur"}],mobile:[{required:!0,message:"联系方式不能为空",trigger:"blur"},{validator:function(t,e,a){Object(i.b)(e)?a():a(new Error("手机号格式错误"))},trigger:"blur"}]}}},methods:{containsValue:function(t,e){if(t&&t.length>0)for(var a=0;a<t.length;a++){if(t[a]===e)return!0}return!1},init:function(t){var e=this;this.dataForm.id=t||0,this.$http({url:this.$http.adornUrl("/profit/agent/signyears/"+this.dataForm.id),method:"get",params:this.$http.adornParams()}).then(function(t){var a=t.data;e.signYearList=a&&200===a.code?a.data:[]}).then(function(){e.visible=!0,e.$nextTick(function(){e.$refs.dataForm.resetFields()})}).then(function(){e.dataForm.id&&e.$http({url:e.$http.adornUrl("/profit/agent/info/"+e.dataForm.id),method:"get",params:e.$http.adornParams()}).then(function(t){var a=t.data;if(a&&200===a.code&&(e.dataForm.agentEntName=a.data.agentEntName,e.dataForm.agentAccount=a.data.agentAccount,e.dataForm.name=a.data.name,e.dataForm.mobile=a.data.mobile,e.dataForm.currYear=a.data.currYear,e.dataForm.signYears=a.data.signYears,a.data.province)){var n=!0,i=!1,l=void 0;try{for(var s,d=r()(o);!(n=(s=d.next()).done);n=!0){var c=s.value;c.FCODE==a.data.province&&(e.dataForm.province=c.FNAME)}}catch(t){i=!0,l=t}finally{try{!n&&d.return&&d.return()}finally{if(i)throw l}}}})})},querySearchAsync:function(t,e){var a=[],n=!0,i=!1,l=void 0;try{for(var s,d=r()(o);!(n=(s=d.next()).done);n=!0){var c=s.value;-1!==c.FNAME.indexOf(t)&&a.push({value:c.FNAME,province:c.FCODE})}}catch(t){i=!0,l=t}finally{try{!n&&d.return&&d.return()}finally{if(i)throw l}}e(a)},handleSelect:function(t){this.dataForm.provice=t.FCODE},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&t.$http({url:t.$http.adornUrl("/profit/agent/"+(t.dataForm.id?"update":"save")),method:"post",data:t.$http.adornData({id:t.dataForm.id||void 0,agentEntName:t.dataForm.agentEntName,agentAccount:t.dataForm.agentAccount,name:t.dataForm.name,mobile:t.dataForm.mobile,provice:t.dataForm.provice,signYears:t.dataForm.signYears})}).then(function(e){var a=e.data;a&&200===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):t.$message.error(a.msg)})})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.dataForm.id?"修改":"新增","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"100px"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.dataFormSubmit()}}},[a("el-form-item",{attrs:{label:"代理商名称",prop:"agentEntName"}},[a("el-input",{attrs:{placeholder:"代理商名称",disabled:t.dataForm.id>0},model:{value:t.dataForm.agentEntName,callback:function(e){t.$set(t.dataForm,"agentEntName",e)},expression:"dataForm.agentEntName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"代理商账号",prop:"agentAccount"}},[a("el-input",{attrs:{placeholder:"代理商账号",disabled:t.dataForm.id>0},model:{value:t.dataForm.agentAccount,callback:function(e){t.$set(t.dataForm,"agentAccount",e)},expression:"dataForm.agentAccount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"联系人姓名"},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系方式",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"联系方式"},model:{value:t.dataForm.mobile,callback:function(e){t.$set(t.dataForm,"mobile",e)},expression:"dataForm.mobile"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所在区域",prop:"province"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:"请输入所在区域"},on:{select:t.handleSelect},model:{value:t.dataForm.province,callback:function(e){t.$set(t.dataForm,"province",e)},expression:"dataForm.province"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"合同有效期",size:"mini",prop:"signYears"}},[a("el-checkbox-group",{model:{value:t.dataForm.signYears,callback:function(e){t.$set(t.dataForm,"signYears",e)},expression:"dataForm.signYears"}},t._l(t.signYearList,function(e){return a("el-checkbox",{key:e,attrs:{label:e,disabled:t.containsValue(t.dataForm.signYears,e)}},[t._v(t._s(e))])}))],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]},d=a("vSla")(l,s,!1,null,null,null);e.default=d.exports},KPnR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("OPv7"),r=a("uB82"),i={data:function(){return{dataForm:{agentAccount:"",agentEntName:"",currYearSignStatus:"",currProfitStatus:""},apmVisible:!1,agentAccount:"",apmDataList:[],apmDataListLoading:!1,apmDataProfitMonthList:[],apmDataProfitMonthListLoading:!1,chgProfitStatusVisible:!1,rdVisible:!1,pageIndex:1,pageSize:10,totalPage:0}},components:{ApmStatusChg:n.default,Rd:r.default},methods:{init:function(t){this.apmVisible=!0,this.agentAccount=t,this.getApmDataList(),this.getApmDataProfitMonthList()},getApmDataList:function(){var t=this;this.apmDataListLoading=!0,this.$http({url:this.$http.adornUrl("/profit/agent/list"),method:"post",data:this.$http.adornParams({agentAccount:this.agentAccount})}).then(function(e){var a=e.data;a&&200===a.code&&a.data?t.apmDataList=a.data.list:t.apmDataList=[],t.apmDataListLoading=!1})},getApmDataProfitMonthList:function(){var t=this;this.apmDataProfitMonthListLoading=!0,this.$http({url:this.$http.adornUrl("/profit/agent/detail/month"),method:"post",data:this.$http.adornParams({agentAccount:this.agentAccount})}).then(function(e){var a=e.data;a&&200===a.code&&a.data?(t.apmDataProfitMonthList=a.data.list,t.totalPage=a.data.totalCount):(t.apmDataProfitMonthList=[],t.totalPage=0),t.apmDataProfitMonthListLoading=!1})},typeIndex:function(t){return t+(this.pageIndex-1)*this.pageSize+1},sizeChangeHandle:function(t){this.pageSize=t,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(t){this.pageIndex=t,this.getDataList()},profitStatusUpdateHandle:function(t,e,a){var n=this;this.chgProfitStatusVisible=!0,this.$nextTick(function(){n.$refs.apmStatusChg.init(t,e,a)})},recommendDetailHandle:function(t,e){var a=this;this.rdVisible=!0,this.$nextTick(function(){a.$refs.rd.init(t,e)})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mod-apm"},[a("el-dialog",{attrs:{title:"伙伴信息","close-on-click-modal":!1,visible:t.apmVisible},on:{"update:visible":function(e){t.apmVisible=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.apmDataListLoading,expression:"apmDataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.apmDataList,border:""}},[a("el-table-column",{attrs:{prop:"agentInfo.agentAccount","header-align":"center",align:"center",label:"代理商账号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"agentInfo.agentEntName","header-align":"center",align:"center",label:"代理商名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"profitInfo.grantAmt","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"发放金额（万元）"}}),t._v(" "),a("el-table-column",{attrs:{prop:"profitInfo.profitSumAmt","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"分润总额（元）"}}),t._v(" "),a("el-table-column",{attrs:{prop:"agentInfo.signYears","header-align":"center",align:"center",label:"签约时间"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.agentInfo.signYears,function(e){return a("el-tag",{key:e,attrs:{size:"small",type:"danger"}},[t._v(t._s(e))])})}}])})],1),t._v(" "),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("div",[t._v("  ")])])],1),t._v(" "),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("h5",[t._v("每月分润详情")])])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.apmDataProfitMonthListLoading,expression:"apmDataProfitMonthListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.apmDataProfitMonthList,border:""}},[a("el-table-column",{attrs:{prop:"profitInfo.date","header-align":"center",align:"center",label:"时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"profitInfo.grantAmt","header-align":"center",align:"center",width:"200","show-overflow-tooltip":!0,label:"贷款发放金额（万元）"}}),t._v(" "),a("el-table-column",{attrs:{prop:"profitInfo.profitSumAmt","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"分润金额（元）"}}),t._v(" "),a("el-table-column",{attrs:{prop:"profitInfo.currProfitStatus","header-align":"center",align:"center",label:"结算状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.profitInfo.currProfitStatus?a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("未结算")]):a("el-tag",{attrs:{size:"small"}},[t._v("已结算")])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.profitStatusUpdateHandle(t.agentAccount,e.row.profitInfo.date,e.row.profitInfo.currProfitStatus)}}},[t._v("修改结算状态")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.recommendDetailHandle(t.agentAccount,e.row.profitInfo.date)}}},[t._v("推荐信息")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1),t._v(" "),t.chgProfitStatusVisible?a("apmStatusChg",{ref:"apmStatusChg",on:{refreshDataList:t.getApmDataProfitMonthList}}):t._e(),t._v(" "),t.rdVisible?a("rd",{ref:"rd"}):t._e()],1)},staticRenderFns:[]},l=a("vSla")(i,o,!1,null,null,null);e.default=l.exports}});